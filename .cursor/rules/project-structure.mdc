---
alwaysApply: true
---
# Project Structure -- Semantic Acoustic Digital Twin

This is a monorepo for an industrial cyber-physical system performing acoustic anomaly detection
on edge devices (NVIDIA Jetson), fused with a BIM-based spatial engine and prescriptive LLM layer.

## Key Directories

- edge/ -- Edge agent for Jetson Orin (audio capture, SELD inference via TensorRT, MQTT publish)
- training/ -- ML training pipeline (ResNet-Conformer + ADPIT loss, PyTorch Lightning)
- cloud/api-gateway/ -- FastAPI REST/WebSocket gateway
- cloud/ingestion-service/ -- MQTT to Kafka to TimescaleDB ingestion
- cloud/device-service/ -- Device registry + mTLS cert management (gRPC)
- spatial/ -- Spatial engine: IFC/BIM parsing (IfcOpenShell), raycasting, triangulation
- semantic/ -- RAG + LLM orchestration (pgvector, hybrid search, Claude/Llama)
- vision/ -- Vision fusion: YOLO11 + BoT-SORT tracking, mobile mapping
- frontend/ -- Next.js 15 dashboard with Three.js BIM viewer
- packages/shared-types/ -- Shared Zod schemas / TS types
- packages/proto/ -- Protobuf/gRPC service definitions
- libs/seld-common/ -- Shared Python library (Pydantic models, DB, MQTT)
- infra/ -- Pulumi IaC (Kubernetes, PostgreSQL, EMQX, Kafka, monitoring)
- helm/ -- Helm charts for K8s deployments
- migrations/ -- Alembic database migrations

## Architecture

- Late Fusion: raw audio never leaves edge. Only JSON payloads (DOA + class + confidence) go to cloud.
- Multi-ACCDOA: output format is C classes x T=3 tracks x 3 Cartesian DOA coordinates.
- ADPIT: training loss resolves track permutation ambiguity + suppresses ghost vectors.
- Edge to Cloud: MQTT 5.0 (NanoMQ edge to EMQX cloud bridge); HTTPS for config/OTA.
- Database: Single PostgreSQL 16+ with pgvector + TimescaleDB extensions.
